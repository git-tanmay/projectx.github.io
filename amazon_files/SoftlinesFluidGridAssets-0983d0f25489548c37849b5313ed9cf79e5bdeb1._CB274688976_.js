(function(){function f(){this.$gridContainer=this.$masterContainer=this.appData=this.cellDefaultDisplay=this.fgPABHandler=this.appConfig=null}function h(a,b,c,e){this.checkRate=100;this.openTab=c;this.closedTab=e;this.PABInterval=a;this.$container=b;this.isOpen=this.isOpenTab();this.$merchContent=g("#s-merch-content");this.probablyHasPeekboo()&&this.setClasses(this.isOpen,this);!1===this.PABInterval&&this.start()}function m(){this.viewObj=this.appConfig=this.fluidGridView=null}function p(){g(document).ready(function(){try{var a,
b,c,e,d;for(d in FG_config.jsonData)FG_config.jsonData.hasOwnProperty(d)&&(b=g("#FGContainer_"+d),b.hasClass(k.CLASSES.WIDGET_INITIALIZED)||(b.addClass(k.CLASSES.WIDGET_INITIALIZED),c=new m,a=b.find(".fluid-grid-container"),e={gridContainer:a,masterContainer:b},c.init(e,{fluidData:FG_config.jsonData[d],peekabooInterval:FG_config.peekabooInterval})));q.isShowMode()&&g("#StyleMode").show()}catch(l){window.ueLogError&&window.ueLogError(l,{logLevel:"ERROR",attribution:"SOFTLINES_FLUIDGRID_JS_EXCEPTION",
message:"Exception occured while initiating softlines fluid grid widget."})}})}var g;var n=function(){return{getView:function(a){return"string"===typeof a?g(a):a},getIsMobile:function(){var a=navigator.userAgent||"";return null===(a.match(/(iPhone|iPod|iPad)/i)||a.match(/(android)/i)&&a.match(/(mobile)/i)||a.match(/(android)/i)&&a.match(/(windowshop)/i)||a.match(/(android)/i)&&a.match(/(amazon)/i)||a.match(/(mobile)/i)&&a.match(/(safari)/i)||a.match(/(bb10)/i)||a.match(/(iemobile|blackberry)/i))?
!1:!0}}}();var k={MAX_NUM_OF_CELLS:4,FEATURE_TILES_MAX_LIST_ITEM:4,BRAND_STORE_SIZE:{MAX_PHONE_ITEMS:12,MAX_TABLET_ITEMS:12,MAX_DESKTOP_ITEMS:42,HEIGHT:50,WIDTH:120,PADDING_TOP_BOTTOM:40,PADDING_LEFT_RIGHT:50},LIST:{MOBILE_MAX:4,MAX:8},WIDGET_TYPE:{LOGO_FARM:"brandStore",FLUID_GRID:"fluidGrid",FLUID_GRID_LINKS:"fluidGridLinks"},CLASSES:{PEEK_A_BOO_OPEN:"fg-peekaboo-open",PEEK_A_BOO_CLOSED:"fg-peekaboo-closed",WIDGET_HEADER:"fg-header",IS_MOBILE:"fg-is-mobile",IS_NOT_MOBILE:"fg-is-not-mobile",
MOBILE_LEFT:"fg-mobile-left",MOBILE_RIGHT:"fg-mobile-right",HAS_LIST:"fg-has-list",MAX_PHONE_LOGO_FARM:"fg-max-phone-logo-farm",MAX_TABLET_LOGO_FARM:"fg-max-tablet-logo-farm",MAX_DESKTOP_LOGO_FARM:"fg-max-desktop-logo-farm",WIDGET_INITIALIZED:"fg-widget-initialized",MIN_HEIGHT_HACK:"fg-min-height"}};f.prototype.init=function(a,b){this.setupVars(a,b);this.setupView()};f.prototype.setupVars=function(a,b){this.$gridContainer=n.getView(a.gridContainer);this.$masterContainer=n.getView(a.masterContainer);
this.appConfig=b;this.appData=b.fluidData;this.isMobile=this.mobileCheck();this.fgPABHandler=new h(b.peekabooInterval,this.$gridContainer,k.CLASSES.PEEK_A_BOO_OPEN,k.CLASSES.PEEK_A_BOO_CLOSED)};f.prototype.setupView=function(){this.isMobile&&this.$gridContainer.attr("style","");this.appData.widgetType===k.WIDGET_TYPE.LOGO_FARM?this.handleBrandStoreReOrder():this.fadeInContainer()};f.prototype.handleBrandStoreReOrder=function(){var a=[],b,c=0,e;e=!1;var d,l,g;b=this.$gridContainer.width();var h=this.$masterContainer.find(".fg-cell-container-brand-stores"),
f=h.find(".fg-cell");if(!this.isMobile){l=Math.floor(b/(k.BRAND_STORE_SIZE.WIDTH+2*k.BRAND_STORE_SIZE.PADDING_LEFT_RIGHT));l=Math.min(l,this.appData.numCells);g=Math.ceil(this.appData.numCells/l);for(b=0;b<l;b++){d=f[b];if(!d){e=!0;break}c++;a.push(d)}if(!e){for(b=1;b<g;b++){e=b*l;d=f[c];if(!d)break;c++;a[e]=d}for(b=0;b<f.length;b++)if("undefined"===typeof a[b]||null===a[b])a[b]=f[c],c++}for(b=0;b<a.length;b++);h.html(a)}this.fadeInContainer()};f.prototype.fadeInContainer=function(){var a=this.$gridContainer.parent();
a.css({visibility:"visible",overflow:"visible",maxHeight:"5000px",opacity:"1"});setTimeout(function(){a.css({height:"auto"})},1)};f.prototype.mobileCheck=function(){if(n.getIsMobile()||-1!==document.location.href.toLowerCase().indexOf("ismobile=true"))return this.$gridContainer.addClass(k.CLASSES.IS_MOBILE),this.$gridContainer.removeClass(k.CLASSES.IS_NOT_MOBILE),!0;this.$gridContainer.removeClass(k.CLASSES.IS_MOBILE);this.$gridContainer.addClass(k.CLASSES.IS_NOT_MOBILE);return!1};h.prototype.start=
function(){this.probablyHasPeekboo()&&this.startInterval()};h.prototype.startInterval=function(){this.PABInterval=setInterval(this.checkURL,this.checkRate,this)};h.prototype.isOpenTab=function(){return-1!==document.location.href.indexOf("#opentab")};h.prototype.checkURL=function(a){try{var b=a.isOpenTab();b&&!a.isOpen?a.setClasses(!0,a):!b&&a.isOpen&&a.setClasses(!1,a)}catch(c){window.ueLogError&&window.ueLogError(c,{logLevel:"ERROR",attribution:"SOFTLINES_FLUIDGRID_JS_EXCEPTION",message:"Exception occured in PeekabooHandler.prototype.checkURL in softlines fluid grid widget."})}};
h.prototype.setClasses=function(a,b){a?(b.$container.addClass(b.openTab),b.$container.removeClass(b.closedTab),b.isOpen=!0,b.merchContentResize(b.$merchContent)):(b.$container.addClass(b.closedTab),b.$container.removeClass(b.openTab),b.isOpen=!1)};h.prototype.merchContentResize=function(a){var b,c,e,d=0;a&&(clearInterval(e),e=setInterval(function(){try{a.height("auto"),a.css({height:a.height()+"px"}),b=c,c=a.height(),b===c&&(10<=d?(clearInterval(e),d=0):d++)}catch(f){window.ueLogError&&window.ueLogError(f,
{logLevel:"ERROR",attribution:"SOFTLINES_FLUIDGRID_JS_EXCEPTION",message:"Exception occured in PeekabooHandler.prototype.merchContentResize in softlines fluid grid widget."})}},100))};h.prototype.probablyHasPeekboo=function(){var a=g("html"),a=a.hasClass("a-mobile")&&a.hasClass("a-touch"),b=g("#s-explore-tab"),b=0<b.length&&b.is(":visible"),c=document.location.href||"",e=c.match(/\/b\//g),d=c.match(/\/browse\//g),c=c.match(/\/s\/browse/g),e=null===e||0<e.length,d=null===d||0<d.length,c=null===c||
0<c.length;return a&&b&&(e||d||c)};m.prototype.init=function(a,b){this.setupVars(a,b);this.fluidGridView.init(a,b)};m.prototype.setupVars=function(a,b){this.viewObj=a;this.configObj=b;this.fluidGridView=new f};window.P&&window.P.AUI_BUILD_DATE?P.now("fluidGrid").execute(function(a){if(!a)try{P.register("fluidGrid",function(){return m})}catch(b){window.ueLogError&&(a={logLevel:"ERROR",attribution:"fluidGrid",message:b.message},window.ueLogError(b,a))}}):window.amznJQ&&amznJQ.declareAvailable("fluidGrid");
var q=function(){function a(a){var c;for(c=0;c<a.length;c++)if(-1!==document.location.href.toLowerCase().indexOf(a[c].toLowerCase()))return!0;return!1}return{isDebug:function(){return a(["isDebug=1","isDebug=true"])},isShowMode:function(){return a(["showMode=1","showMode=true"])}}}();window.P&&window.P.AUI_BUILD_DATE?P.when("fluidGrid","jQuery").execute(function(a,b){g=b;p()}):window.amznJQ&&amznJQ.available("jQuery",function(){amznJQ.available("fluidGrid",function(){g=jQuery;
p()})})})();